<div class="d-flex justify-content-between">
<div class="flex-column">
<div id="filters" class="card card-body" style="width:220px;">
  <h4 class="card-title" (click)="toggleFilters('scores')"><a>Filter scores &rsaquo;</a></h4>
  <div *ngIf="filters == 'scores'">
    <span><input type="checkbox" id="myCheckbox1" value="known_drug" (change)="updateScore()"> Known Drugs</span><br>
    <span><input type="checkbox" id="myCheckbox2" value="rna_expression" (change)="updateScore()"> RNA Expression</span><br>
    <span><input type="checkbox" id="myCheckbox3" value="somatic_mutation" (change)="updateScore()"> Somatic Mutations</span><br>
    <span><input type="checkbox" id="myCheckbox4" value="genetic_association" (change)="updateScore()"> Genetic Associations</span><br>
    <span><input type="checkbox" id="myCheckbox5" value="literature" (change)="updateScore()"> Literature</span><br>
    <span><input type="checkbox" id="myCheckbox6" value="animal_model" (change)="updateScore()"> Animal Models</span><br>
    <span><input type="checkbox" id="myCheckbox7" value="affected_pathway" (change)="updateScore()"> Affected Pathways</span><br>
  </div>
  <hr>
  <h4 class="card-title" (click)="toggleFilters('interactions')"><a>Interactions &rsaquo;</a></h4>
  <div *ngIf="filters == 'interactions'">
    <span><input type="checkbox" id="toggleManual" value="manual" checked="true" (change)="toggleManual()"> Manual Interactions</span><br>
    <span><input type="checkbox" id="toggleArrows" value="arrows" checked="true" (change)="toggleArrows()"> Interaction Types</span><br>
    <svg id="legendsvg" width="200px" height="200px">
      <defs>
        <marker id="legend-directed" refX="5" refY="3" markerWidth="7" markerHeight="8" orient="auto" stroke-linecap="butt">
          <path d="M 1 1 L 4.5 3 L 1 5" fill="none" style="stroke: rgb(153, 153, 153);"/>
        </marker>
        <marker id="legend-stimulatory" refX="5" refY="3" markerWidth="7" markerHeight="8" orient="auto" stroke-linecap="butt">
          <path d="M 1 1 L 4.5 3 L 1 5" fill="none" style="stroke: rgb(255, 65, 54);"/>
        </marker>
        <marker id="legend-inhibitory" refX="5" refY="3" markerWidth="7" markerHeight="8" orient="auto" stroke-linecap="butt">
          <path d="M 1 1 L 4.5 3 L 1 5" fill="none" style="stroke: rgb(0, 116, 217);"/>
        </marker>
        <marker id="legend-dual" refX="5" refY="3" markerWidth="7" markerHeight="8" orient="auto" stroke-linecap="butt">
          <path d="M 1 1 L 4.5 3 L 1 5" fill="none" style="stroke: rgb(177, 13, 201);"/>
        </marker>
      </defs>
      <text x="90" y="35" text-anchor="middle">HotNet2 calculated</text>
      <line x1="20" y1="40" x2="160" y2="40" stroke="#999" stroke-width="3" stroke-opacity="0.6"/>
      <text x="90" y="65" text-anchor="middle">Included post-hoc</text>
      <line x1="20" y1="70" x2="160" y2="70" stroke="#999" stroke-width="3" stroke-opacity="0.6" stroke-dasharray="10,5"/>
      <text x="90" y="95" text-anchor="middle">Directed</text>
      <line x1="20" y1="100" x2="160" y2="100" stroke="#999" stroke-width="3" stroke-opacity="0.6" marker-end="url(#legend-directed)" />
      <text x="90" y="125" text-anchor="middle">Stimulatory</text>
      <line x1="20" y1="130" x2="160" y2="130" stroke="#999" stroke-width="3" stroke-opacity="0.6" marker-end="url(#legend-stimulatory)" />
      <text x="90" y="155" text-anchor="middle">Inhibitory</text>
      <line x1="20" y1="160" x2="160" y2="160" stroke="#999" stroke-width="3" stroke-opacity="0.6" marker-end="url(#legend-inhibitory)" />
      <text x="90" y="185" text-anchor="middle">Stim. & Inhib.</text>
      <line x1="20" y1="190" x2="160" y2="190" stroke="#999" stroke-width="3" stroke-opacity="0.6" marker-end="url(#legend-dual)" />
    </svg>
  </div>
</div>
<br>
<div id="matrix-legend" class="matrix-legend-layout-h" style="margin-left: 40px;">
  <span class="matrix-legend-from">0</span>
  <span class="matrix-legend-item clearfix" *ngFor="let item of scalecolors">
    <span class="matrix-legend-background" [ngStyle]="{'background':item}"></span>
  </span>
  <span class="matrix-legend-to">1</span>
</div>
<br>
<br>
</div>

<div id="graph">
  <svg id="graphsvg" width="700" height="500">
  </svg>
</div>

<div id="details" class="card card-body" style="width:250px;max-width:250px;height:450px">
  <h4 class="card-title">Association Details: <span *ngIf="selectedNode">{{selectedNode.label}}</span></h4>
  <div *ngIf="selectedNode">
    <p>Total Association: {{selectedNode.assoc | number:'1.1-5'}}</p>
    <p>Known Drug: {{selectedNode.known_drug | number:'1.1-5'}}</p>
    <p>RNA Expression: {{selectedNode.rna_expression | number:'1.1-5'}}</p>
    <p>Somatic Mutation: {{selectedNode.somatic_mutation | number:'1.1-5'}}</p>
    <p>Genetic Association: {{selectedNode.genetic_association | number:'1.1-5'}}</p>
    <p>Literature: {{selectedNode.literature | number:'1.1-5'}}</p>
    <p>Animal Model: {{selectedNode.animal_model | number:'1.1-5'}}</p>
    <p>Affected Pathway: {{selectedNode.affected_pathway | number:'1.1-5'}}</p>
    <a href="https://www.targetvalidation.org/evidence/{{selectedNode.id}}/{{efo}}" target="_blank">Open Targets Evidence</a>
  </div>
</div>
</div>
